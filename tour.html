<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sezmiee Tour Detail</title>
  <meta name="description" content="Sezmiee International – Tour details, schedules, meeting points, pricing, and booking."/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js"></script>
  <style>
    .fade-up{opacity:0;transform:translateY(10px);transition:opacity .4s ease,transform .4s ease}
    .fade-up.show{opacity:1;transform:translateY(0)}
    button:focus{outline:2px solid #000;outline-offset:2px}
    .safe-edge{padding-left:max(env(safe-area-inset-left),1rem);padding-right:max(env(safe-area-inset-right),1rem)}
    .shadow-soft{box-shadow:0 10px 20px rgba(0,0,0,.08), 0 6px 6px rgba(0,0,0,.06)}
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <header class="bg-white/80 sticky top-0 z-40 backdrop-blur border-b">
    <div class="max-w-6xl mx-auto flex items-center justify-between safe-edge py-3">
      <a href="index.html" class="text-sm md:text-base font-extrabold tracking-tight">SEZMIEE <span class="text-gray-500">International</span></a>
      <div class="flex items-center gap-2 text-xs md:text-sm">
        <select id="lang" class="rounded-xl border px-2 py-1">
          <option value="kr">한국어</option>
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="zh">简体</option>
          <option value="zhHant">繁體</option>
          <option value="ja">日本語</option>
        </select>
        <a id="backLink" href="index.html" class="rounded-xl border px-2 py-1 hover:bg-gray-50">← <span data-i="back">뒤로</span></a>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto safe-edge p-4 md:p-6 space-y-6">
    <nav class="text-xs text-gray-500"><a href="index.html" class="hover:underline" data-i="home">홈</a> / <span id="bc-city">Seoul</span> / <span id="bc-title">Tour</span></nav>

    <!-- Hero -->
    <section id="hero" class="relative rounded-3xl overflow-hidden bg-gray-200">
      <img id="heroImg" class="w-full h-64 md:h-[420px] object-cover" alt="tour"/>
      <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"></div>
      <div class="absolute bottom-0 left-0 right-0 p-5 md:p-7 text-white">
        <div class="flex items-center gap-2 text-xs"> 
          <span id="badge-area" class="px-2 py-1 rounded-full bg-white/10 border border-white/30 backdrop-blur">Area</span>
          <span id="badge-tags" class="px-2 py-1 rounded-full bg-white/10 border border-white/30 backdrop-blur">Tag</span>
          <span id="badge-duration" class="px-2 py-1 rounded-full bg-white/10 border border-white/30 backdrop-blur">3h</span>
        </div>
        <h1 id="title" class="mt-2 md:mt-3 text-2xl md:text-4xl font-extrabold drop-shadow">Tour</h1>
        <p id="subtitle" class="text-sm md:text-base text-white/90"></p>
      </div>
    </section>

    <section class="grid lg:grid-cols-3 gap-6">
      <!-- Left: content -->
      <div class="lg:col-span-2 space-y-6">
        <!-- Quick facts -->
        <div class="rounded-2xl border bg-white p-4 md:p-5">
          <h2 class="text-lg font-semibold mb-3" data-i="overview">개요</h2>
          <ul class="grid sm:grid-cols-2 gap-3 text-sm">
            <li>💰 <span data-i="price">가격</span>: <strong id="price">—</strong></li>
            <li>⏱️ <span data-i="duration">소요시간</span>: <span id="duration">—</span></li>
            <li>📍 <span data-i="meeting">미팅장소</span>: <span id="meetPoint">—</span></li>
            <li>🗺️ <span data-i="map">지도</span>: <a id="meetMap" class="text-blue-600 hover:underline" target="_blank" rel="noreferrer">Open</a></li>
          </ul>
        </div>

        <!-- Itinerary -->
        <div class="rounded-2xl border bg-white p-4 md:p-5">
          <h2 class="text-lg font-semibold mb-3" data-i="itinerary">일정</h2>
          <ol id="itinerary" class="relative border-s pl-5 space-y-3">
            <!-- items injected -->
          </ol>
        </div>

        <!-- Gallery -->
        <div class="rounded-2xl border bg-white p-4 md:p-5">
          <h2 class="text-lg font-semibold mb-3" data-i="gallery">갤러리</h2>
          <div id="gallery" class="grid grid-cols-2 md:grid-cols-3 gap-3"></div>
        </div>

        <!-- FAQ -->
        <div class="rounded-2xl border bg-white p-4 md:p-5">
          <h2 class="text-lg font-semibold mb-3">FAQ</h2>
          <details class="rounded-xl border p-4"><summary class="font-medium" data-i="faq1q">예약/결제는 어떻게 하나요?</summary><p class="text-sm text-gray-600 mt-2" data-i="faq1a">문의 → 가이드 확인 → 입금 → 확정.</p></details>
          <details class="rounded-xl border p-4 mt-2"><summary class="font-medium" data-i="faq2q">픽업 가능 지역?</summary><p class="text-sm text-gray-600 mt-2" data-i="faq2a">서울 전역 + 김포/인천(일부 추가요금)</p></details>
          <details class="rounded-xl border p-4 mt-2"><summary class="font-medium" data-i="faq3q">취소 규정?</summary><p class="text-sm text-gray-600 mt-2" data-i="faq3a">7일 전 전액 / 3일 전 50% / 24시간 내 불가</p></details>
        </div>
      </div>

      <!-- Right: booking -->
      <aside class="lg:col-span-1 space-y-4">
        <div class="rounded-2xl border bg-white p-4 md:p-5 sticky top-20 shadow-soft">
          <div class="flex items-baseline justify-between mb-2">
            <div class="text-sm text-gray-500" data-i="from">1인 기준</div>
            <div class="text-2xl font-extrabold" id="priceBig">—</div>
          </div>
          <div class="grid gap-2 text-sm">
            <label class="flex items-center gap-2"> <span data-i="date">날짜</span> <input id="date" type="date" class="rounded-xl border px-2 py-1 flex-1"/> </label>
            <label class="flex items-center gap-2"> <span data-i="guests">인원</span>
              <select id="pax" class="rounded-xl border px-2 py-1 flex-1">
                <option>1</option><option>2</option><option>3</option><option>4</option><option>5+</option>
              </select>
            </label>
          </div>
          <div class="mt-3 flex gap-2">
            <a id="book" target="_blank" rel="noreferrer" class="flex-1 rounded-2xl bg-black text-white px-4 py-2 text-sm text-center hover:opacity-90">Book</a>
            <button id="qr" class="rounded-2xl border px-4 py-2 text-sm">QR</button>
          </div>
          <div id="qrWrap" class="mt-3 hidden grid place-items-center">
            <canvas id="qrCanvas" class="rounded-xl border"></canvas>
          </div>
          <div class="mt-3 text-xs text-gray-500" data-i="note">결제/재고 확인은 외부 채널(Klook 등)에서 진행됩니다.</div>
        </div>

        <div class="rounded-2xl border bg-white p-4">
          <div class="text-sm font-semibold mb-1" data-i="contact">문의</div>
          <div class="text-sm space-y-1">
            <a href="mailto:sezmiee.project@gmail.com" class="block hover:underline">📧 sezmiee.project@gmail.com</a>
            <a href="tel:+821049648503" class="block hover:underline">📞 +82 10-4964-8503</a>
            <a id="wh" class="block hover:underline" target="_blank" rel="noreferrer">💬 WhatsApp/KakaoTalk</a>
          </div>
        </div>
      </aside>
    </section>

    <!-- Similar tours -->
    <section class="rounded-2xl border bg-white p-4 md:p-5">
      <h2 class="text-lg font-semibold mb-3" data-i="similar">비슷한 투어</h2>
      <div id="similar" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
    </section>
  </main>

  <footer class="py-10 text-center text-xs text-gray-500">© 2025 Sezmiee International</footer>

<script>
// 1) index.html이 저장해둔 언어 먼저 가져오기
const params = new URLSearchParams(location.search);
const qLang = params.get('lang');
const savedLang = localStorage.getItem('sez_lang');
let lang = qLang || savedLang || 'kr';

// 2) index.html에서 쓰던 다국어 세트 그대로 가져옴
const UI = {
  kr:{placeholder:"태그/지역/이름 검색…",search:"검색"},
  en:{placeholder:"Search tags, area, name…",search:"Search"},
  es:{placeholder:"Buscar etiquetas, zona, nombre…",search:"Buscar"},
  zh:{placeholder:"搜索 标签/区域/名称…",search:"搜索"},
  zhHant:{placeholder:"搜尋 標籤/區域/名稱…",search:"搜尋"},
  ja:{placeholder:"タグ/エリア/名称を検索…",search:"検索"}
};

// 너가 방금 준 그 엄청 긴 COPY / I18N_TOURS / I18N_SCHEDULES / I18N_MEETS / AREA_MAP 전부 ↓ 여기 붙여넣으면 돼
// (길어서 여기서는 구조만 보여줄게. 실제로는 네 코드 그대로 복붙해.)
const COPY = { /* ... 너가 위에 준 그대로 ... */ };
const I18N_TOURS = { /* ... 너가 위에 준 그대로 ... */ };
const I18N_SCHEDULES = { /* ... 너가 위에 준 그대로 ... */ };
const I18N_MEETS = { /* ... 너가 위에 준 그대로 ... */ };
const AREA_KEYS = ['Seoul','Gyeonggi','Various','Hangang','Hongdae','Jongno','Naksan','Fortress','Myeongdong','Gangnam','DDP','Euljiro','Seongsu','Ikseon','Bukchon','Paju (Heyri)','Bukhansan','Inwangsan'];
const AREA_MAP = { /* ... 너가 위에 준 그대로 ... */ };

// 3) 투어 데이터 (index.html과 동일 + gallery만 tour별로 넣을 수 있게)
const Data = [
  {
    id:"t1",
    slug:"seoul-instagrammable-cafe-hop",
    name:"Seoul Instagrammable Café-Hop Tour",
    priceKRW:45000,
    duration:"3h",
    area:"Seoul · Seongsu & Ikseon",
    tags:["Café","Photo","City"],
    heroImg:"https://pds.joongang.co.kr/news/component/htmlphoto_mmdata/202304/28/e64f80cd-4ecf-4d9d-ae93-563e12f0bca5.jpg",
    short:"3 popular IG-worthy cafés + photo walk.",
    schedule:"Meet 10:00 → Café A → Café B → Photo walk → Café C",
    meetPoint:"Seongsu Station Exit 3",
    meetMapUrl:"https://map.naver.com/v5/search/%EC%84%B1%EC%88%98%EC%97%AD%203%EB%B2%88%EC%B6%9C%EA%B5%AC",
    bookingUrl:"https://www.klook.com/experiment/your-product-link",
    // ✅ 네가 직접 넣는 갤러리
    gallery:[
      "https://images.unsplash.com/photo-1514933651103-005eec06c04b?auto=format&fit=crop&w=1200&q=80",
      "https://images.unsplash.com/photo-1514933651103-005eec06c04b?auto=format&fit=crop&w=900&q=80",
      "https://images.unsplash.com/photo-1565299507177-b0ac66763828?auto=format&fit=crop&w=1200&q=80"
    ]
  },
  {
    id:"t2",
    slug:"seoul-hidden-gem-city-walk",
    name:"Seoul Hidden-Gem City Walk Experience",
    priceKRW:52000,
    duration:"3h",
    area:"Seoul · Ikseon & Bukchon",
    tags:["Local","City","Culture"],
    heroImg:"https://alovelettertoasia.com/wp-content/uploads/2023/08/ikeson-dong-seoul-itinerary.jpg",
    short:"Lesser-known alleys with a local guide.",
    schedule:"14:00 start → Ikseon alleys → Bukchon photo → Local café",
    meetPoint:"Jongno 3-ga Station Exit 4",
    meetMapUrl:"https://map.naver.com/v5/search/%EC%A2%85%EB%A1%9C3%EA%B0%80%EC%97%AD%204%EB%B2%88%EC%B6%9C%EA%B5%AC",
    bookingUrl:"https://www.klook.com/experiment/your-product-link",
    gallery:[
      "https://images.unsplash.com/photo-1554797589-7241bb691973?auto=format&fit=crop&w=1200&q=80",
      "https://images.unsplash.com/photo-1505245208761-ba872912fac0?auto=format&fit=crop&w=1200&q=80"
    ]
  },
  // ... 나머지도 같은 패턴으로 ...
];

// 4) 현재 들어온 투어 찾기
const bySlug = params.get('slug');
const byId = params.get('id');
let tour = Data.find(t => t.slug === bySlug) || Data.find(t => t.id === byId) || Data[0];

// 5) 언어 바꾸기 도우미
function setLang(newLang){
  lang = newLang;
  localStorage.setItem('sez_lang', newLang);
  // 셀렉트박스에도 반영
  const sel = document.querySelector('#lang');
  if (sel) sel.value = newLang;
  applyLang();
  fill(); // 언어바뀌면 화면 다시 그리기
}

// 6) 공통 텍스트 적용
function applyLang(){
  const pack = {
    kr:{home:'홈',back:'뒤로',overview:'개요',price:'가격',duration:'소요시간',meeting:'미팅장소',map:'지도',itinerary:'일정',gallery:'갤러리',from:'1인 기준',date:'날짜',guests:'인원',note:'결제/재고 확인은 외부 채널(Klook 등)에서 진행됩니다.',contact:'문의',similar:'비슷한 투어'},
    en:{home:'Home',back:'Back',overview:'Overview',price:'Price',duration:'Duration',meeting:'Meeting point',map:'Map',itinerary:'Itinerary',gallery:'Gallery',from:'Per person',date:'Date',guests:'Guests',note:'Payments/availability are handled on external channels (e.g., Klook).',contact:'Contact',similar:'Similar tours'},
    es:{home:'Inicio',back:'Atrás',overview:'Resumen',price:'Precio',duration:'Duración',meeting:'Punto de encuentro',map:'Mapa',itinerary:'Itinerario',gallery:'Galería',from:'Por persona',date:'Fecha',guests:'Personas',note:'Pagos/disponibilidad en canales externos (Klook).',contact:'Contacto',similar:'Tours similares'},
    zh:{home:'首页',back:'返回',overview:'概要',price:'价格',duration:'时长',meeting:'集合地点',map:'地图',itinerary:'行程',gallery:'相册',from:'每人',date:'日期',guests:'人数',note:'支付/库存由外部渠道（如Klook）处理。',contact:'联系',similar:'相似行程'},
    zhHant:{home:'首頁',back:'返回',overview:'概要',price:'價格',duration:'時長',meeting:'集合地點',map:'地圖',itinerary:'行程',gallery:'相簿',from:'每人',date:'日期',guests:'人數',note:'付款/庫存由外部平台（Klook）處理。',contact:'聯絡',similar:'相似行程'},
    ja:{home:'ホーム',back:'戻る',overview:'概要',price:'料金',duration:'所要時間',meeting:'集合場所',map:'地図',itinerary:'行程',gallery:'ギャラリー',from:'1名あたり',date:'日付',guests:'人数',note:'支払い/空き状況は外部サイト(Klook)で管理されます。',contact:'お問い合わせ',similar:'類似ツアー'}
  }[lang];

  document.querySelectorAll('[data-i]').forEach(el => {
    const k = el.dataset.i;
    if (pack[k]) el.textContent = pack[k];
  });
}

// 7) 지역/미팅/일정도 네가 index에서 쓰던거로 변환
function localizeMeeting(tour){
  const num = Number((tour.id||'').replace(/\D/g,''));
  const table = I18N_MEETS[lang] || I18N_MEETS['en'];
  return table && table[num] ? table[num] : tour.meetPoint;
}

function localizeSchedule(tour){
  const num = Number((tour.id||'').replace(/\D/g,''));
  const table = I18N_SCHEDULES[lang] || I18N_SCHEDULES['en'];
  return table && table[num] ? table[num] : tour.schedule;
}

function localizeTitle(tour){
  const num = Number((tour.id||'').replace(/\D/g,''));
  const table = I18N_TOURS[lang] || I18N_TOURS['en'];
  return table && table[num] ? table[num].title : tour.name;
}

function localizeDesc(tour){
  const num = Number((tour.id||'').replace(/\D/g,''));
  const table = I18N_TOURS[lang] || I18N_TOURS['en'];
  return table && table[num] ? table[num].desc : tour.short;
}

function localizeArea(area){
  const map = AREA_MAP[lang] || {};
  let out = area;
  AREA_KEYS.forEach(k=>{
    if (map[k]) {
      out = out.replace(k, map[k]);
    }
  });
  return out;
}

// 8) 실제로 화면 채우기
function fill(){
  // hero
  document.querySelector('#heroImg').src = tour.heroImg;
  document.querySelector('#title').textContent = localizeTitle(tour);
  document.querySelector('#subtitle').textContent = localizeDesc(tour);
  document.querySelector('#badge-area').textContent = localizeArea(tour.area);
  document.querySelector('#badge-duration').textContent = tour.duration;
  document.querySelector('#badge-tags').textContent = tour.tags.join(' · ');

  // breadcrumb
  document.querySelector('#bc-city').textContent = localizeArea((tour.area.split('·')[0]||'Seoul').trim());
  document.querySelector('#bc-title').textContent = localizeTitle(tour);

  // quick facts
  const KRW = v => new Intl.NumberFormat('ko-KR',{style:'currency',currency:'KRW',maximumFractionDigits:0}).format(v);
  document.querySelector('#price').textContent = KRW(tour.priceKRW);
  document.querySelector('#priceBig').textContent = KRW(tour.priceKRW);
  document.querySelector('#duration').textContent = tour.duration;
  document.querySelector('#meetPoint').textContent = localizeMeeting(tour);
  document.querySelector('#meetMap').href = tour.meetMapUrl;

  // itinerary
  const steps = localizeSchedule(tour).split('→').map(s=>s.trim());
  document.querySelector('#itinerary').innerHTML = steps.map(s=>`
    <li class="ms-4 relative">
      <div class="absolute -start-1.5 mt-1.5 h-2 w-2 rounded-full bg-gray-900"></div>
      <div class="text-sm">${s}</div>
    </li>
  `).join('');

  // gallery
  const g = document.querySelector('#gallery');
  const pics = Array.isArray(tour.gallery) && tour.gallery.length
    ? tour.gallery
    : [tour.heroImg, tour.heroImg + '&t=1', tour.heroImg + '&t=2'];
  g.innerHTML = pics.map(src => `
    <img src="${src}" class="w-full h-28 md:h-36 object-cover rounded-xl" loading="lazy"/>
  `).join('');

  // similar
  const simWrap = document.querySelector('#similar');
  const similar = Data.filter(t =>
    t.id !== tour.id &&
    (t.area.split('·')[0] === tour.area.split('·')[0] ||
     t.tags.some(tag => tour.tags.includes(tag)))
  ).slice(0,3);
  simWrap.innerHTML = similar.map(t => `
    <a href="tour.html?slug=${t.slug}&lang=${lang}" class="group rounded-2xl border overflow-hidden bg-white block">
      <div class="aspect-[16/9] overflow-hidden">
        <img src="${t.heroImg}" class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"/>
      </div>
      <div class="p-3">
        <div class="flex items-center justify-between">
          <h3 class="text-sm font-semibold">${(I18N_TOURS[lang] && I18N_TOURS[lang][Number(t.id.replace(/\D/g,''))])
              ? I18N_TOURS[lang][Number(t.id.replace(/\D/g,''))].title
              : t.name}</h3>
          <span class="text-xs text-gray-500">${t.duration}</span>
        </div>
        <div class="text-xs text-gray-500">${localizeArea(t.area)}</div>
        <div class="text-sm font-bold mt-1">${KRW(t.priceKRW)}</div>
      </div>
    </a>
  `).join('');
}

// 9) 초기화
document.addEventListener('DOMContentLoaded', () => {
  // 언어 셀렉트 박스 초기값
  const sel = document.querySelector('#lang');
  if (sel) {
    sel.value = lang;
    sel.addEventListener('change', e => setLang(e.target.value));
  }

  applyLang();
  fill();

  // QR
  document.querySelector('#qr').addEventListener('click', () => {
    const wrap = document.querySelector('#qrWrap');
    wrap.classList.toggle('hidden');
    if (!wrap.dataset.loaded) {
      QRCode.toCanvas(document.querySelector('#qrCanvas'),
        document.querySelector('#book').href,
        {margin:1,scale:6},
        (err)=>{ if(!err) wrap.dataset.loaded = '1'; }
      );
    }
  });
});
</script>

